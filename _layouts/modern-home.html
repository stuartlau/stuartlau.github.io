<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} | {{ site.title }}</title>
    <link rel="stylesheet" href="/assets/css/modern-landing.css">

    <script src="https://cdn.counter.dev/script.js" data-id="4c8f7caa-2b55-46cd-a995-2c4633303773"
        data-utcoffset="8"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T5N5JY1E21"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-T5N5JY1E21');
    </script>
</head>

<body>
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-bg"></div>
        <div class="hero-particles">
            {% for i in (1..20) %}
            <div class="particle" style="left: {{ i | times: 5 | plus: 10 }}%; animation-delay: {{ i | times: 0.5 }}s;">
            </div>
            {% endfor %}
        </div>

        <div class="hero-content">
            <div class="hero-avatar">
                <img src="{{ site.url }}/images/douban_avatar.jpg" alt="Stuart Lau">
            </div>
            <h1 class="hero-title">Stuart Lau</h1>
            <p class="hero-subtitle">Full Stack Engineer & Patent Inventor</p>
            <div class="hero-links">
                <a href="https://github.com/stuartlau" class="hero-link-btn" target="_blank" aria-label="GitHub">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                    </svg>
                    <span>GitHub</span>
                </a>
                <a href="https://www.linkedin.com/in/stuartlau" class="hero-link-btn" target="_blank"
                    aria-label="LinkedIn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
                    </svg>
                    <span>LinkedIn</span>
                </a>
                <a href="/social.html" class="hero-link-btn" aria-label="Social">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z">
                        </path>
                    </svg>
                    <span>Social</span>
                </a>
            </div>
        </div>

        <!-- Scroll Down Indicator -->
        <a href="#content-start" class="scroll-down-indicator" aria-label="Scroll down">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
            </svg>
        </a>
    </section>

    <div id="content-start"></div>

    <!-- Dynamic Content Section -->
    <section class="content-section">
        <div class="content-main">
            <!-- Tab Container -->
            <div class="tab-container">
                <div class="tab-header">
                    <button class="h-tab-btn active" data-tab="experience">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                        </svg>
                        <span>Experience</span>
                    </button>
                    <button class="h-tab-btn" data-tab="patents">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                        <span>Patents</span>
                    </button>
                    <button class="h-tab-btn" data-tab="blog">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                        <span>Blogs</span>
                    </button>
                </div>
            </div>

            <!-- Experience Panel -->
            <div class="tab-panel active" id="experience-panel">
                <div class="terminal-window">
                    <div class="terminal-header">
                        <span class="terminal-btn red"></span>
                        <span class="terminal-btn yellow"></span>
                        <span class="terminal-btn green"></span>
                        <span class="terminal-title">experience.json</span>
                    </div>
                    <div class="terminal-body">
                        <div class="terminal-line">
                            <span class="terminal-prompt">$</span>
                            <span class="terminal-command">cat experience.json</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output">[</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> {</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"company"</span>: <span
                                    class="terminal-string">"Xiaohongshu (小红书)"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"period"</span>: <span
                                    class="terminal-string">"2024 - Present"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"role"</span>: <span
                                    class="terminal-string">"Backend Lead, Social Interaction R&D"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"description"</span>: <span
                                    class="terminal-string">"Social interaction platform for 100M+ DAU
                                    users"</span></span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> },</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> {</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"company"</span>: <span
                                    class="terminal-string">"Kuaishou (快手)"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"period"</span>: <span
                                    class="terminal-string">"2018 - 2024"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"role"</span>: <span
                                    class="terminal-string">"Technical Lead, IM Cloud Platform"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"description"</span>: <span
                                    class="terminal-string">"Built IM platform for 400M+ DAU, billions messages
                                    daily"</span></span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> },</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> {</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"company"</span>: <span
                                    class="terminal-string">"Amazon"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"period"</span>: <span
                                    class="terminal-string">"2017 - 2018"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"role"</span>: <span
                                    class="terminal-string">"Software Engineer, SCOT Team"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"description"</span>: <span
                                    class="terminal-string">"Warehouse automation & pricing strategy
                                    systems"</span></span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> },</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> {</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"company"</span>: <span
                                    class="terminal-string">"Xiaomi (小米)"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"period"</span>: <span
                                    class="terminal-string">"2014 - 2017"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"role"</span>: <span
                                    class="terminal-string">"Senior Developer & Architect"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"description"</span>: <span
                                    class="terminal-string">"Game Center architecture for millions of DAU"</span></span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> },</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> {</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"company"</span>: <span
                                    class="terminal-string">"ZDNS"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"period"</span>: <span
                                    class="terminal-string">"2012 - 2014"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"role"</span>: <span
                                    class="terminal-string">"Core Engineer, Founding Team"</span>,</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> <span class="terminal-keyword">"description"</span>: <span
                                    class="terminal-string">"TLD Cloud platform, ranked 4th globally"</span></span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output"> }</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output">]</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-prompt">$</span>
                            <span class="terminal-command cursor">_</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Patents Panel -->
            <div class="tab-panel" id="patents-panel">
                <div class="stats-row">
                    <a href="/publications/#china" class="stat-card">
                        <div class="stat-value">120+</div>
                        <div class="stat-label">Total</div>
                    </a>
                    <a href="/publications/#china" class="stat-card">
                        <div class="stat-value">100+</div>
                        <div class="stat-label">China</div>
                    </a>
                    <a href="/publications/#us" class="stat-card">
                        <div class="stat-value">15+</div>
                        <div class="stat-label">US</div>
                    </a>
                    <a href="/publications/#europe" class="stat-card">
                        <div class="stat-value">5+</div>
                        <div class="stat-label">EU/JP</div>
                    </a>
                </div>
                <div class="patent-list" id="patent-list">
                    {%- assign patent_posts = site.pages | where: "layout", "post" | where_exp: "p", "p.url contains
                    '/blogs/'" | where_exp: "p", "p.title contains '授权专利'" -%}
                    {%- for patent in patent_posts limit: 20 -%}
                    <a href="{{ patent.url }}" class="patent-item" style="display: none;">
                        {%- assign title_clean = patent.title | remove: "授权专利-" | remove: "Granted Patent-" -%}
                        <span class="patent-title">{{ title_clean | split: "-" | last }}</span>
                        <span class="patent-tags">
                            {%- assign display_tags = "" -%}
                            {%- for tag in patent.tags -%}
                            {%- if tag != "Patent" and tag != "China" and tag != "US" and tag != "Japan" and tag !=
                            "已授权" -%}
                            {%- assign display_tags = display_tags | append: tag | append: " " -%}
                            {%- endif -%}
                            {%- endfor -%}
                            {{ display_tags | truncatewords: 2, "" }}
                        </span>
                    </a>
                    {%- endfor -%}
                </div>
                <div class="tags-section">
                    <div class="tags-cloud">
                        <a href="/publications/#im" class="tag">IM</a>
                        <a href="/publications/#social" class="tag">Social Networking</a>
                        <a href="/publications/#video" class="tag">Video Streaming</a>
                        <a href="/publications/#gaming" class="tag">Gaming</a>
                        <a href="/publications/#distributed" class="tag">Distributed Systems</a>
                        <a href="/publications/#realtime" class="tag">Real-time Communication</a>
                        <a href="/publications/#database" class="tag">Database</a>
                        <a href="/publications/#architecture" class="tag">Architecture</a>
                        <a href="/publications/#message-queue" class="tag">Message Queue</a>
                        <a href="/publications/#cache" class="tag">Cache</a>
                        <a href="/publications/#microservices" class="tag">Microservices</a>
                        <a href="/publications/#load-balancing" class="tag">Load Balancing</a>
                    </div>
                </div>
                <a href="/publications/" class="panel-link">View all patents →</a>
            </div>

            <!-- Blog Panel -->
            <div class="tab-panel" id="blog-panel">
                <div class="article-list">
                    {% assign sorted_posts = "" | split: "" %}
                    {% for post in site.pages %}
                    {% if post.url contains '/blogs/' and post.layout == 'post' and post.date %}
                    {% assign sorted_posts = sorted_posts | push: post %}
                    {% endif %}
                    {% endfor %}
                    {% assign sorted_posts = sorted_posts | sort: "date" | reverse %}
                    {% for post in sorted_posts limit: 12 %}
                    <a href="{{ post.url }}" class="article-item">
                        <span class="article-date">{{ post.date | date: "%Y-%m-%d" }}</span>
                        <h3 class="article-title">{{ post.title }}</h3>
                        <span class="article-tag">
                            {% if post.tags.size > 0 %}
                            {{ post.tags | first }}
                            {% else %}
                            Tech
                            {% endif %}
                        </span>
                    </a>
                    {% endfor %}
                </div>
                <a href="/blogs/" class="panel-link">View all articles →</a>
            </div>

            <!-- Travel Panel -->
            <div class="tab-panel" id="travel-panel">
                <a href="/travel/" class="panel-link">View all travel journals →</a>
            </div>
        </div>
    </section>

    <!-- Contact Section -->

    <!-- Footer -->
    <footer class="footer-section">
        <p class="footer-text">
            © {{ site.time | date: "%Y" }} Stuart Lau. Built with
            <a href="https://jekyllrb.com/" class="footer-link">Jekyll</a> +
            <a href="https://pages.github.com/" class="footer-link">GitHub Pages</a>
        </p>
    </footer>

    <script>
        // Tab switching for horizontal tabs
        function switchTab(tabId) {
            document.querySelectorAll('.h-tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            const hTabBtn = document.querySelector(`.h-tab-btn[data-tab="${tabId}"]`);
            const panel = document.getElementById(tabId + '-panel');

            if (hTabBtn) hTabBtn.classList.add('active');
            if (panel) panel.classList.add('active');
        }

        document.querySelectorAll('.h-tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                switchTab(btn.dataset.tab);
            });
        });

        // Scroll animations
        document.addEventListener('DOMContentLoaded', function () {
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.timeline-content, .stat-card, .article-item, .travel-item, .collection-item').forEach(el => {
                observer.observe(el);
            });
        });

        // Random shuffle for collection lists
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function shuffleCollectionList(listId) {
            const list = document.getElementById(listId);
            if (!list) return;

            const items = Array.from(list.querySelectorAll('.collection-item'));
            const link = list.querySelector('.collection-link');

            if (items.length > 0 && link) {
                // Shuffle items
                const shuffledItems = shuffleArray(items);

                // Remove all items
                items.forEach(item => item.remove());

                // Re-append shuffled items (keep link at end)
                shuffledItems.forEach(item => list.insertBefore(item, link));
            }
        }

        function shufflePatentList() {
            const list = document.getElementById('patent-list');
            if (!list) return;

            const items = Array.from(list.querySelectorAll('.patent-item'));

            if (items.length > 0) {
                // Shuffle items
                const shuffledItems = shuffleArray(items);

                // Show only first 8
                shuffledItems.forEach((item, index) => {
                    item.style.display = index < 8 ? 'flex' : 'none';
                });
            }
        }

        // Shuffle each collection list
        document.addEventListener('DOMContentLoaded', function () {
            shuffleCollectionList('movies-list');
            shuffleCollectionList('books-list');
            shuffleCollectionList('games-list');
            shufflePatentList();
        });
    </script>
</body>

</html>